{
  "$schema": "https://vega.github.io/schema/vega/v5.json",
  "description": "Entry for challenge 07 in the 2024 DVS Du Bois Visualization Contest.",
  "usermeta": {
    "developedBy": "Madison Giammaria",
    "LinkedIn": "https://www.linkedin.com/in/madison-giammaria-58463b33",
    "email": "giammariam@gmail.com"
  },
  "title": {
    "text": "Illiteracy of the American Negroes compared with that of other nations.",
    "subtitle": {
      "signal": "['───────','Proportion d\\'  illettrés parmi les Nègres Americains comparée à celle de autres nations.', '───────', 'Done by Atlanta University.']"
    }
  },
  "width": 400,
  "padding": 5,
  "signals": [
    {
      "name": "height",
      "description": "dynamically adjust the height based on the width",
      "init": "1.3*width"
    },
    {
      "name": "backgroundImageXY",
      "description": "x and y coordinates for the background image",
      "value": [-40, -80]
    },
    {
      "name": "font",
      "description": "font to be used throught the chart",
      "value": "sans-serif"
    }
  ],
  "marks": [
    {
      "name": "background_img",
      "description": "background image to make the visual look like the original plate",
      "type": "image",
      "encode": {
        "enter": {
          "url": {
            "value": "https://raw.githubusercontent.com/Giammaria/Du-Bois-DVS-challenge/main/2024/challenge-07/_artifacts/background.jpg"
          },
          "x": {"value": -40},
          "y": {"value": -80},
          "aspect": {"value": true},
          "width": {"signal": "width*1.2"}
        }
      }
    },
    {
      "name": "bar_fill_marks",
      "type": "rect",
      "from": {"data": "dataset"},
      "interactive": false,
      "encode": {
        "update": {
          "x": {"scale": "x", "value": 0, "offset": 37.5},
          "width": {"scale": "x", "field": "Percentage"},
          "y": {"scale": "y", "field": "Country"},
          "height": {"signal": "bandwidth('y')"},
          "fill": {
            "signal": "datum['Country'] === 'Negroes, U.S.A.' ? '#CA143F' : '#1C7E52'"
          },
          "stroke": {"value": "#999"}
        }
      }
    },
    {
      "type": "group",
      "name": "footer_group",
      "description": "The group of marks located at the bottom of the canvas that provide additional information about the visual",
      "marks": [
        {
          "name": "footer_prefix_text",
          "description": "The labels for each footer item",
          "type": "text",
          "from": {"data": "footer"},
          "interactive": false,
          "encode": {
            "update": {
              "opacity": {"value": 1},
              "fill": {"signal": "'#888'"},
              "font": {"signal": "font"},
              "fontWeight": {"value": 100},
              "fontSize": {"value": 10},
              "baseline": {"value": "middle"},
              "x": {"signal": "0"},
              "y": {"signal": "scale('yScaleFooter', datum['id'])"},
              "text": {"signal": "datum['text'][0]"}
            }
          }
        },
        {
          "name": "footer_href_text",
          "description": "The hyperlinks for each footer item",
          "type": "text",
          "from": {"data": "footer"},
          "interactive": true,
          "encode": {
            "update": {
              "opacity": {"value": 0.65},
              "fill": {"signal": "'#333'"},
              "font": {"signal": "font"},
              "fontWeight": {"value": 600},
              "fontSize": {"value": 10},
              "baseline": {"value": "middle"},
              "x": {
                "signal": "data('footer_prefix_text')[0]['bounds']['x2']+5"
              },
              "y": {"signal": "scale('yScaleFooter', datum['id'])"},
              "text": {"signal": "datum['text'][1]"},
              "href": {"field": "href"},
              "cursor": {"value": "pointer"},
              "tooltip": {"field": "href"}
            },
            "hover": {"opacity": {"value": 1}}
          }
        }
      ]
    }
  ],
  "axes": [
    {
      "scale": "y",
      "orient": "left",
      "ticks": false,
      "labelFont": {"signal": "font"},
      "labelFontSize": 7,
      "labelAlign": "left",
      "labelPadding": 57.5,
      "grid": false,
      "offset": -37.5,
      "zindex": 99
    }
  ],
  "scales": [
    {
      "name": "x",
      "type": "linear",
      "domain": [0, 1],
      "range": [0, {"signal": "width+35"}]
    },
    {
      "name": "y",
      "type": "band",
      "domain": {
        "data": "dataset",
        "field": "Country",
        "sort": {"field": "Percentage", "order": "descending"}
      },
      "range": [{"signal": "77.5"}, {"signal": "height-45"}],
      "padding": 0.45
    },
    {
      "name": "yInteractive",
      "type": "band",
      "domain": {
        "data": "dataset",
        "field": "Country",
        "sort": {"field": "Percentage", "order": "descending"}
      },
      "range": [{"signal": "77.5"}, {"signal": "height-45"}],
      "padding": 0
    },
    {
      "name": "yScaleFooter",
      "type": "band",
      "domain": {"data": "footer", "field": "id"},
      "range": [
        {"signal": "height+20"},
        {"signal": "height+30+length(data('footer'))*11"}
      ]
    }
  ],
  "data": [
    {
      "name": "dataset",
      "url": "https://raw.githubusercontent.com/Giammaria/Du-Bois-DVS-challenge/main/2024/challenge-07/data/data.csv",
      "format": {"type": "csv", "parse": "auto"},
      "transform": [{"type": "formula", "expr": "0", "as": "x0"}]
    },
    {
      "name": "footer",
      "values": [
        {
          "id": 1,
          "text": [
            "Data Source:",
            "github.com/ajstarks/dubois-data-portraits/"
          ],
          "href": "https://github.com/ajstarks/dubois-data-portraits/tree/master/challenge/2024/challenge07"
        },
        {
          "id": 2,
          "text": [
            "Original:",
            "Illiteracy of the American Negroes compared with that of other nations"
          ],
          "href": "https://github.com/ajstarks/dubois-data-portraits/blob/master/challenge/2024/challenge07/original-plate-47.jpg"
        },
        {
          "id": 4,
          "text": ["Challenge:", "2024 Du Bois Visualization Challenge"],
          "href": "https://www.datavisualizationsociety.org/news/2024/2/2/advance-your-data-viz-skills-with-the-weekly-2024-du-bois-visualization-challenge"
        },
        {
          "id": 5,
          "text": ["Emulated By:", "Madison Giammaria"],
          "href": "https://www.linkedin.com/in/madison-giammaria-58463b33"
        }
      ]
    }
  ],
  "config": {
    "title": {
      "orient": "top",
      "anchor": "middle",
      "font": {"value": "Times"},
      "fontSize": 11,
      "lineHeight": 20,
      "offset": -85,
      "fontWeight": 100,
      "color": "#888",
      "zindex": 99,
      "subtitleFont": {"value": "Times"},
      "subtitleFontSize": 8,
      "subtitleFontWeight": 100,
      "subtitleColor": "#999",
      "subtitleLineHeight": 11,
      "subtitlePadding": 5
    }
  }
}